<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="google-site-verification" content="XY_Df8ypC1IlrIbuwUjIjdFXsVXKzQ6uSsnDmR5allU" />
  <title>CalorieFlow | Smart Calorie & Diet Calculator</title>
  <meta name="description" content="CalorieFlow is a smart calorie calculator that helps you estimate your daily calorie needs based on gender, age, height, weight and activity level." />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="logo.png.png" type="image/png" />
  <link rel="shortcut icon" href="logo.png.png" type="image/png" />
  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

  <style>
    :root {
      --bg-gradient-start: #f2e9ff;
      --bg-gradient-end: #e0f3ff;
      --card-bg: #ffffff;
      --accent: #2563eb;
      --accent-soft: #dbeafe;
      --text-main: #111827;
      --text-muted: #6b7280;
      --error: #dc2626;
      --border: #e5e7eb;
      --radius-lg: 20px;
      --shadow-soft: 0 18px 40px rgba(15, 23, 42, 0.12);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Poppins", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #e5f0ff;
      background-image: url("background.png");
      background-position: center;
      background-size: cover;
      background-repeat: no-repeat;
      background-attachment: fixed;
      color: var(--text-main);
      padding: 24px;
      transition: background-color 0.25s ease, color 0.25s ease;
    }

    /* üåô Dark mode overrides */
    body.dark-mode {
      --bg-gradient-start: #020617;
      --bg-gradient-end: #020617;
      --card-bg: #020617;
      --accent: #38bdf8;
      --accent-soft: rgba(56, 189, 248, 0.2);
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --error: #f97373;
      --border: #1f2937;

      background-color: #020617;
    }

    .app-container {
      width: 100%;
      max-width: 900px;
    }

    header {
      text-align: center;
      margin-bottom: 20px;
    }

    .app-logo {
      width: 160px;
      height: 160px;
      object-fit: contain;
      margin-bottom: 14px;
    }

    header h1 {
      font-size: 2.1rem;
      font-weight: 700;
      letter-spacing: 0.02em;
      margin-bottom: 6px;
    }

    header p {
      font-size: 0.95rem;
      color: var(--text-muted);
      margin-bottom: 10px;
    }

    /* ÿ≤ÿ± ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿ´ŸäŸÖ */
    .theme-toggle {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(255, 255, 255, 0.8);
      font-size: 0.8rem;
      cursor: pointer;
      color: var(--text-main);
      backdrop-filter: blur(6px);
      transition: background 0.2s ease, transform 0.08s ease, box-shadow 0.2s ease, border-color 0.2s ease;
    }

    .theme-toggle:hover {
      background: #ffffff;
      transform: translateY(-1px);
      box-shadow: 0 6px 16px rgba(15, 23, 42, 0.18);
      border-color: var(--accent-soft);
    }

    .theme-toggle .theme-icon {
      font-size: 1rem;
    }

    body.dark-mode .theme-toggle {
      background: rgba(15, 23, 42, 0.9);
    }

    .calculator-card {
      background: var(--card-bg);
      border-radius: 26px;
      box-shadow: var(--shadow-soft);
      padding: 24px 20px;
      display: grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap: 24px;
      transition: background 0.25s ease, box-shadow 0.25s ease;
    }

    @media (max-width: 768px) {
      .calculator-card {
        grid-template-columns: 1fr;
        padding: 20px 16px;
      }
    }

    .form-section {
      border-right: 1px solid var(--border);
      padding-right: 20px;
    }

    @media (max-width: 768px) {
      .form-section {
        border-right: none;
        border-bottom: 1px solid var(--border);
        padding-right: 0;
        padding-bottom: 18px;
        margin-bottom: 4px;
      }
    }

    .results-section {
      display: flex;
      flex-direction: column;
      gap: 14px;
      justify-content: center;
    }

    .section-title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px 14px;
    }

    @media (max-width: 600px) {
      .form-grid {
        grid-template-columns: 1fr;
      }
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 0.88rem;
    }

    label {
      font-weight: 500;
    }

        input[type="number"],
    select {
      width: 100%;
      padding: 9px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      font-size: 0.85rem;
      outline: none;
      transition: border 0.2s ease, box-shadow 0.2s ease, transform 0.08s ease, background 0.2s ease, color 0.2s ease;
      background: #f9fafb;
      color: var(--text-main); /* ‚úÖ ÿÆŸÑŸä ÿßŸÑŸÜÿµ ÿØÿßÿ¶ŸÖŸãÿß ÿ®ŸÜŸÅÿ≥ ŸÑŸàŸÜ ÿßŸÑŸÜÿµ ÿßŸÑÿπÿßŸÖ */
    }

    body.dark-mode input[type="number"],
    body.dark-mode select {
      background: #020617;
      color: var(--text-main); /* ‚úÖ ŸÜÿµ Ÿàÿßÿ∂ÿ≠ ŸÅŸä ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÑŸäŸÑŸä */
    }

    input[type="number"]::placeholder {
      color: #9ca3af;
      font-size: 0.8rem;
    }

    input[type="number"]:focus,
    select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px var(--accent-soft);
      background: #ffffff;
      transform: translateY(-1px);
    }

    body.dark-mode input[type="number"]:focus,
    body.dark-mode select:focus {
      background: #020617;
    }

    input[type="number"]::placeholder {
      color: #9ca3af;
      font-size: 0.8rem;
    }

    .inline-options {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .chip-option {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      font-size: 0.8rem;
      cursor: pointer;
      background: #f9fafb;
      transition: border 0.2s ease, background 0.2s ease, transform 0.08s ease, box-shadow 0.2s ease;
    }

    body.dark-mode .chip-option {
      background: #020617;
    }

    .chip-option input {
      accent-color: var(--accent);
      cursor: pointer;
    }

    .chip-option:hover {
      border-color: var(--accent-soft);
      background: #ffffff;
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(15, 23, 42, 0.08);
    }

    body.dark-mode .chip-option:hover {
      background: #020617;
      box-shadow: 0 2px 8px rgba(15, 23, 42, 0.6);
    }

    .btn-primary {
      margin-top: 10px;
      width: 100%;
      padding: 11px 14px;
      border-radius: 999px;
      border: none;
      background: var(--accent);
      color: #ffffff;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: background 0.18s ease, transform 0.08s ease, box-shadow 0.18s ease;
      box-shadow: 0 10px 24px rgba(37, 99, 235, 0.35);
    }

    .btn-primary:hover {
      background: #1d4ed8;
      transform: translateY(-1px) scale(1.01);
      box-shadow: 0 14px 30px rgba(37, 99, 235, 0.45);
    }

    body.dark-mode .btn-primary:hover {
      background: #0ea5e9;
      box-shadow: 0 14px 30px rgba(14, 165, 233, 0.5);
    }

    .btn-primary:active {
      transform: translateY(0) scale(0.99);
      box-shadow: 0 6px 16px rgba(37, 99, 235, 0.3);
    }

    .btn-primary span.icon {
      font-size: 1.1rem;
      line-height: 1;
    }

    .error-message {
      margin-top: 8px;
      font-size: 0.8rem;
      color: var(--error);
      background: #fee2e2;
      border-radius: 999px;
      padding: 6px 10px;
      display: none;
    }

    .result-box {
      border-radius: 20px;
      border: 1px dashed var(--accent-soft);
      background: #f9fafb;
      padding: 14px 14px;
      opacity: 0;
      transform: translateY(6px);
      transition: opacity 0.25s ease, transform 0.25s ease, background 0.25s ease, border-color 0.25s ease;
      font-size: 0.9rem;
    }

    body.dark-mode .result-box {
      background: #020617;
      border-color: rgba(148, 163, 184, 0.6);
    }

    .result-box.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .result-tag {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      background: var(--accent-soft);
      font-size: 0.7rem;
      font-weight: 500;
      color: #1d4ed8;
      margin-bottom: 6px;
    }

    body.dark-mode .result-tag {
      background: rgba(56, 189, 248, 0.15);
      color: #38bdf8;
    }

    .result-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 4px;
      font-size: 0.88rem;
    }

    .result-label {
      color: var(--text-muted);
    }

    .result-value {
      font-weight: 600;
    }

    .result-note {
      margin-top: 6px;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .tips-box {
      margin-top: 6px;
      font-size: 0.78rem;
      color: var(--text-muted);
      line-height: 1.5;
    }

    .tips-box strong {
      color: var(--text-main);
    }

    /* üí™ ŸÉÿ±ÿ™ ÿßŸÑŸÖÿßŸÉÿ±Ÿàÿ≤ */
    .macro-box {
      margin-top: 10px;
      border-top: 1px dashed rgba(148, 163, 184, 0.8);
      padding-top: 8px;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
    }

    @media (max-width: 600px) {
      .macro-box {
        grid-template-columns: 1fr;
      }
    }

    .macro-chip {
      background: rgba(37, 99, 235, 0.06);
      border-radius: 12px;
      padding: 8px 10px;
      font-size: 0.78rem;
    }

    body.dark-mode .macro-chip {
      background: #020617;
      border: 1px solid #1f2937;
    }

    .macro-label {
      font-weight: 600;
      margin-bottom: 2px;
    }

    .macro-value {
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 2px;
    }

    .macro-note {
      font-size: 0.74rem;
      color: var(--text-muted);
    }

    /* üßæ Daily plan box */
    .dayplan-box {
      margin-top: 10px;
      border-radius: 14px;
      background: #f3f4ff;
      padding: 10px 12px;
      font-size: 0.8rem;
    }

    body.dark-mode .dayplan-box {
      background: #020617;
      border: 1px solid #1f2937;
    }

    .dayplan-title {
      font-weight: 600;
      margin-bottom: 6px;
      color: #1d4ed8;
    }

    body.dark-mode .dayplan-title {
      color: #38bdf8;
    }

    .dayplan-row {
      display: grid;
      grid-template-columns: 1.4fr 1fr 0.6fr;
      align-items: center;
      padding: 3px 0;
    }

    .dayplan-label {
      color: var(--text-main);
    }

    .dayplan-value {
      text-align: right;
      font-weight: 600;
    }

    .dayplan-percent {
      text-align: right;
      color: var(--text-muted);
      font-size: 0.75rem;
    }

    @media (max-width: 600px) {
      .dayplan-row {
        grid-template-columns: 1.2fr 1fr 0.7fr;
      }
    }

    footer {
      margin-top: 12px;
      text-align: center;
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    /* üìö Learn section (tips & SEO content) */
    .learn-section {
      margin-top: 28px;
      padding: 18px 20px;
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(148, 163, 184, 0.6);
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.12);
      font-size: 0.9rem;
    }

    body.dark-mode .learn-section {
      background: rgba(15, 23, 42, 0.96);
      border-color: #1f2937;
      box-shadow: 0 22px 60px rgba(0, 0, 0, 0.9);
    }

    .learn-header {
      margin-bottom: 14px;
    }

    .learn-header h2 {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .learn-header p {
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    .learn-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 14px;
    }

    @media (max-width: 900px) {
      .learn-grid {
        grid-template-columns: 1fr 1fr;
      }
    }

    @media (max-width: 600px) {
      .learn-grid {
        grid-template-columns: 1fr;
      }
    }

    .learn-card {
      padding: 10px 12px;
      border-radius: 14px;
      background: #f9fafb;
      border: 1px solid rgba(226, 232, 240, 0.9);
    }

    body.dark-mode .learn-card {
      background: #020617;
      border-color: #1f2937;
    }

    .learn-card h3 {
      font-size: 0.95rem;
      margin-bottom: 6px;
    }

    .learn-card p {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .learn-card ul {
      padding-left: 18px;
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 2px;
    }

    .learn-card ul li {
      margin-bottom: 2px;
    }
        /* üì± ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿπÿ±ÿ∂ ÿπŸÑŸâ ÿßŸÑÿ¥ÿßÿ¥ÿßÿ™ ÿßŸÑÿµÿ∫Ÿäÿ±ÿ© */
    @media (max-width: 600px) {
      body {
        padding: 12px;
      }

      .calculator-card {
        padding: 16px 12px;
      }
    }

  </style>
</head>
<body>
  <div class="app-container">
    <header>
      <img src="logo.png.png" alt="CalorieFlow logo" class="app-logo" />
      <h1>CalorieFlow</h1>
      <p>Smart calorie calculator for your daily health journey.</p>

      <!-- üåô ÿ≤ÿ± ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿ´ŸäŸÖ -->
      <button id="themeToggle" class="theme-toggle" type="button">
        <span class="theme-icon">üåô</span>
        <span class="theme-label">Dark mode</span>
      </button>
    </header>

    <main>
      <section class="calculator-card">
        <!-- FORM SECTION -->
        <section class="form-section">
          <h2 class="section-title">Your Details</h2>
          <form id="calorieForm" novalidate>
            <div class="form-grid">
              <!-- Gender -->
              <div class="form-group">
                <label>Gender</label>
                <div class="inline-options">
                  <label class="chip-option">
                    <input type="radio" name="gender" value="male" />
                    <span>Male</span>
                  </label>
                  <label class="chip-option">
                    <input type="radio" name="gender" value="female" />
                    <span>Female</span>
                  </label>
                </div>
              </div>

              <!-- Age -->
              <div class="form-group">
                <label for="age">Age</label>
                <input
                  type="number"
                  id="age"
                  min="10"
                  max="100"
                  placeholder="Years (10 - 100)"
                />
              </div>

              <!-- Height -->
              <div class="form-group">
                <label for="height">Height</label>
                <input
                  type="number"
                  id="height"
                  min="100"
                  max="250"
                  placeholder="Height in cm (100 - 250)"
                />
              </div>

              <!-- Weight -->
              <div class="form-group">
                <label for="weight">Weight</label>
                <input
                  type="number"
                  id="weight"
                  min="30"
                  max="250"
                  placeholder="Weight in kg (30 - 250)"
                />
              </div>

              <!-- Activity Level -->
              <div class="form-group">
                <label for="activity">Activity Level</label>
                <select id="activity">
                  <option value="">Select your activity</option>
                  <option value="sedentary">
                    Sedentary (little or no exercise)
                  </option>
                  <option value="light">
                    Lightly active (1‚Äì3 days per week)
                  </option>
                  <option value="moderate">
                    Moderately active (3‚Äì5 days per week)
                  </option>
                  <option value="very">
                    Very active (6‚Äì7 days per week)
                  </option>
                  <option value="super">
                    Super active (intense training)
                  </option>
                </select>
              </div>

              <!-- Goal -->
              <div class="form-group">
                <label>Goal</label>
                <div class="inline-options">
                  <label class="chip-option">
                    <input type="radio" name="goal" value="lose" />
                    <span>Lose weight</span>
                  </label>
                  <label class="chip-option">
                    <input type="radio" name="goal" value="maintain" />
                    <span>Maintain weight</span>
                  </label>
                  <label class="chip-option">
                    <input type="radio" name="goal" value="gain" />
                    <span>Gain weight</span>
                  </label>
                </div>
              </div>
            </div>

            <button type="submit" class="btn-primary">
              <span class="icon">‚ö°</span>
              <span>Calculate Calories</span>
            </button>

            <div id="errorMessage" class="error-message"></div>
          </form>
        </section>

        <!-- RESULTS SECTION -->
        <section class="results-section">
          <h2 class="section-title">Your Results</h2>
          <div id="resultBox" class="result-box">
            <div class="result-tag">
              <span>Estimated values based on your data</span>
            </div>

            <div class="result-row">
              <div class="result-label">Basal Metabolic Rate (BMR)</div>
              <div class="result-value" id="bmrValue">‚Äî kcal</div>
            </div>

            <div class="result-row">
              <div class="result-label">Maintenance Calories</div>
              <div class="result-value" id="maintenanceValue">‚Äî kcal</div>
            </div>

            <div class="result-row">
              <div class="result-label">Target Calories</div>
              <div class="result-value" id="goalValue">‚Äî kcal</div>
            </div>

            <!-- üß¨ Macros -->
            <div class="macro-box">
              <div class="macro-chip">
                <div class="macro-label">Protein</div>
                <div class="macro-value" id="proteinValue">‚Äî g/day</div>
                <div class="macro-note">Around 1.6‚Äì2.2 g per kg of body weight.</div>
              </div>
              <div class="macro-chip">
                <div class="macro-label">Fats</div>
                <div class="macro-value" id="fatValue">‚Äî g/day</div>
                <div class="macro-note">Around 0.8‚Äì1.0 g per kg of body weight.</div>
              </div>
              <div class="macro-chip">
                <div class="macro-label">Carbs</div>
                <div class="macro-value" id="carbValue">‚Äî g/day</div>
                <div class="macro-note">Remaining calories after protein & fats.</div>
              </div>
            </div>

            <!-- üßæ Daily plan -->
            <div class="dayplan-box">
              <div class="dayplan-title">Suggested daily split</div>
              <div class="dayplan-row">
                <span class="dayplan-label">Breakfast</span>
                <span class="dayplan-value" id="breakfastValue">‚Äî kcal</span>
                <span class="dayplan-percent">30%</span>
              </div>
              <div class="dayplan-row">
                <span class="dayplan-label">Lunch</span>
                <span class="dayplan-value" id="lunchValue">‚Äî kcal</span>
                <span class="dayplan-percent">40%</span>
              </div>
              <div class="dayplan-row">
                <span class="dayplan-label">Dinner</span>
                <span class="dayplan-value" id="dinnerValue">‚Äî kcal</span>
                <span class="dayplan-percent">25%</span>
              </div>
              <div class="dayplan-row">
                <span class="dayplan-label">Snacks</span>
                <span class="dayplan-value" id="snacksValue">‚Äî kcal</span>
                <span class="dayplan-percent">5%</span>
              </div>
            </div>

            <p class="result-note" id="goalDescription">
              Fill in your details, choose your activity level and goal, then
              click "Calculate Calories" to see your personalized results.
            </p>

            <div class="tips-box">
              <strong>Note:</strong> These numbers are estimates. Your real
              calorie needs can vary based on metabolism, health conditions,
              body composition, and many other personal factors. Consider
              consulting a health or nutrition professional for personalized
              advice.
            </div>
          </div>
        </section>
      </section>

      <!-- üìö Learn more section (SEO + tips) -->
      <section class="learn-section" id="calorieflow-guide">
        <div class="learn-header">
          <h2>How to use CalorieFlow effectively</h2>
          <p>
            This short guide explains how to read your results and use them in a healthy,
            realistic way. It is not medical advice, but a starting point for better habits.
          </p>
        </div>

        <div class="learn-grid">
          <article class="learn-card">
            <h3>1. Understand your maintenance calories</h3>
            <p>
              Your maintenance calories are the amount of energy your body needs to keep your
              current weight with your current activity level.
            </p>
            <ul>
              <li>Eating close to this value ‚Üí weight stays roughly stable.</li>
              <li>Going far above for long periods ‚Üí weight gain.</li>
              <li>Going far below for long periods ‚Üí weight loss, but also fatigue.</li>
            </ul>
          </article>

          <article class="learn-card">
            <h3>2. Safe fat loss strategy</h3>
            <p>
              For most people, a moderate calorie deficit is safer and easier to maintain than
              aggressive diets.
            </p>
            <ul>
              <li>Target a deficit of about 15‚Äì20% below maintenance.</li>
              <li>Prioritise protein and whole foods to stay full.</li>
              <li>Combine calorie control with walking and resistance training.</li>
            </ul>
          </article>

          <article class="learn-card">
            <h3>3. Building muscle & strength</h3>
            <p>
              To gain quality weight, focus on progressive training and a small calorie surplus.
            </p>
            <ul>
              <li>Eat around 5‚Äì15% above maintenance calories.</li>
              <li>Train with weights 2‚Äì4 times per week, focusing on compound movements.</li>
              <li>Keep protein high and sleep at least 7 hours per night.</li>
            </ul>
          </article>
        </div>
      </section>

      <footer>
        This tool is for educational purposes only and does not replace medical
        or professional nutrition advice.
      </footer>
    </main>
  </div>

  <script>
    const form = document.getElementById("calorieForm");
    const errorMessage = document.getElementById("errorMessage");
    const resultBox = document.getElementById("resultBox");
    const bmrValueEl = document.getElementById("bmrValue");
    const maintenanceValueEl = document.getElementById("maintenanceValue");
    const goalValueEl = document.getElementById("goalValue");
    const goalDescriptionEl = document.getElementById("goalDescription");
    const proteinValueEl = document.getElementById("proteinValue");
    const fatValueEl = document.getElementById("fatValue");
    const carbValueEl = document.getElementById("carbValue");
    const breakfastValueEl = document.getElementById("breakfastValue");
    const lunchValueEl = document.getElementById("lunchValue");
    const dinnerValueEl = document.getElementById("dinnerValue");
    const snacksValueEl = document.getElementById("snacksValue");

    const themeToggleBtn = document.getElementById("themeToggle");
    const themeIcon = themeToggleBtn.querySelector(".theme-icon");
    const themeLabel = themeToggleBtn.querySelector(".theme-label");

    const STORAGE_KEY_THEME = "cf-theme";
    const STORAGE_KEY_FORM = "cf-last-inputs";

    function clearError() {
      errorMessage.style.display = "none";
      errorMessage.textContent = "";
    }

    function showError(msg) {
      errorMessage.textContent = msg;
      errorMessage.style.display = "block";
    }

    // ÿ™ÿ≠ÿØŸäÿ´ ŸÜÿµ ÿ≤ÿ± ÿßŸÑÿ´ŸäŸÖ
    function updateThemeButton(mode) {
      if (mode === "dark") {
        themeIcon.textContent = "‚òÄÔ∏è";
        themeLabel.textContent = "Light mode";
      } else {
        themeIcon.textContent = "üåô";
        themeLabel.textContent = "Dark mode";
      }
    }

    // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ´ŸäŸÖ ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ ŸÖŸÜ ÿßŸÑŸÖÿ™ÿµŸÅÿ≠
    (function initTheme() {
      const savedTheme = localStorage.getItem(STORAGE_KEY_THEME);
      if (savedTheme === "dark") {
        document.body.classList.add("dark-mode");
        updateThemeButton("dark");
      } else {
        updateThemeButton("light");
      }
    })();

    // ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑÿ´ŸäŸÖ ÿπŸÜÿØ ÿßŸÑÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ ÿßŸÑÿ≤ÿ±
    themeToggleBtn.addEventListener("click", () => {
      const isDark = document.body.classList.toggle("dark-mode");
      const mode = isDark ? "dark" : "light";
      localStorage.setItem(STORAGE_KEY_THEME, mode);
      updateThemeButton(mode);
    });

    // ÿ≠ŸÅÿ∏ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨ ŸÅŸä ÿßŸÑŸÖÿ™ÿµŸÅÿ≠
    function saveFormState() {
      const gender = form.querySelector('input[name="gender"]:checked');
      const goal = form.querySelector('input[name="goal"]:checked');
      const data = {
        gender: gender ? gender.value : "",
        goal: goal ? goal.value : "",
        age: document.getElementById("age").value || "",
        height: document.getElementById("height").value || "",
        weight: document.getElementById("weight").value || "",
        activity: document.getElementById("activity").value || ""
      };
      localStorage.setItem(STORAGE_KEY_FORM, JSON.stringify(data));
    }

    // ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨ ŸÖŸÜ ÿßŸÑŸÖÿ™ÿµŸÅÿ≠
    function loadFormState() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY_FORM);
        if (!raw) return;
        const data = JSON.parse(raw);

        if (data.age) document.getElementById("age").value = data.age;
        if (data.height) document.getElementById("height").value = data.height;
        if (data.weight) document.getElementById("weight").value = data.weight;
        if (data.activity) document.getElementById("activity").value = data.activity;

        if (data.gender) {
          const gEl = form.querySelector(
            `input[name="gender"][value="${data.gender}"]`
          );
          if (gEl) gEl.checked = true;
        }

        if (data.goal) {
          const goalEl = form.querySelector(
            `input[name="goal"][value="${data.goal}"]`
          );
          if (goalEl) goalEl.checked = true;
        }

        // ŸÑŸà ŸÉŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸàÿ¨ŸàÿØÿ© ŸÜÿ≠ÿ≥ÿ® ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨ ÿ™ŸÑŸÇÿßÿ¶Ÿäÿß
        if (
          data.gender &&
          data.goal &&
          data.age &&
          data.height &&
          data.weight &&
          data.activity
        ) {
          setTimeout(() => {
            form.dispatchEvent(new Event("submit", { cancelable: true }));
          }, 0);
        }
      } catch (e) {
        console.warn("Could not load saved form state", e);
      }
    }

    // Clear errors when user changes inputs
    form.querySelectorAll("input, select").forEach((el) => {
      el.addEventListener("input", clearError);
      el.addEventListener("change", clearError);
    });

    form.addEventListener("submit", function (event) {
      event.preventDefault();
      clearError();

      const gender = form.querySelector('input[name="gender"]:checked');
      const goal = form.querySelector('input[name="goal"]:checked');
      const age = Number(document.getElementById("age").value);
      const height = Number(document.getElementById("height").value);
      const weight = Number(document.getElementById("weight").value);
      const activity = document.getElementById("activity").value;

      // Validation
      if (!gender) {
        showError("Please select your gender.");
        return;
      }
      if (!age || age < 10 || age > 100) {
        showError("Please enter a valid age between 10 and 100.");
        return;
      }
      if (!height || height < 100 || height > 250) {
        showError("Please enter a valid height between 100 and 250 cm.");
        return;
      }
      if (!weight || weight < 30 || weight > 250) {
        showError("Please enter a valid weight between 30 and 250 kg.");
        return;
      }
      if (!activity) {
        showError("Please select your activity level.");
        return;
      }
      if (!goal) {
        showError("Please select your goal.");
        return;
      }

      // ‚úÖ ÿ®ÿπÿØ ŸÖÿß ŸÜÿ™ÿ£ŸÉÿØ ÿ•ŸÜ ŸÉŸÑ ÿ¥Ÿäÿ° ÿµÿ≠Ÿäÿ≠ ŸÜÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
      saveFormState();

      // BMR calculation (Mifflin-St Jeor)
      let bmr;
      if (gender.value === "male") {
        bmr = 10 * weight + 6.25 * height - 5 * age + 5;
      } else {
        // female
        bmr = 10 * weight + 6.25 * height - 5 * age - 161;
      }

      // Activity factor
      let activityFactor = 1.2;
      switch (activity) {
        case "sedentary":
          activityFactor = 1.2;
          break;
        case "light":
          activityFactor = 1.375;
          break;
        case "moderate":
          activityFactor = 1.55;
          break;
        case "very":
          activityFactor = 1.725;
          break;
        case "super":
          activityFactor = 1.9;
          break;
      }

      const maintenanceCalories = bmr * activityFactor;

      // Goal adjustment
      let suggestedCalories = maintenanceCalories;
      let description = "";

      if (goal.value === "lose") {
        suggestedCalories = maintenanceCalories * 0.85; // -15%
        description =
          "To lose weight, a gentle calorie deficit is recommended. These calories may help you lose weight gradually while maintaining energy for daily activities.";
      } else if (goal.value === "maintain") {
        suggestedCalories = maintenanceCalories;
        description =
          "To maintain your current weight, try to stay close to this calorie range and keep a consistent activity level.";
      } else if (goal.value === "gain") {
        suggestedCalories = maintenanceCalories * 1.15; // +15%
        description =
          "To gain weight, especially muscle mass, a slight calorie surplus combined with strength training can be effective.";
      }

      // Round main values
      const bmrRounded = Math.round(bmr);
      const maintenanceRounded = Math.round(maintenanceCalories);
      const suggestedRounded = Math.round(suggestedCalories);

      // Macros
      // Protein: 1.6‚Äì2.2 g/kg
      const proteinMin = weight * 1.6;
      const proteinMax = weight * 2.2;
      const proteinMid = (proteinMin + proteinMax) / 2;

      // Fat: 0.8‚Äì1.0 g/kg
      const fatMin = weight * 0.8;
      const fatMax = weight * 1.0;
      const fatMid = (fatMin + fatMax) / 2;

      // Calories taken by protein and fat
      const caloriesFromProtein = proteinMid * 4;
      const caloriesFromFat = fatMid * 9;

      let carbsGrams =
        (suggestedCalories - (caloriesFromProtein + caloriesFromFat)) / 4;
      if (carbsGrams < 0) carbsGrams = 0;

      // Display results (main)
      bmrValueEl.textContent = bmrRounded + " kcal";
      maintenanceValueEl.textContent = maintenanceRounded + " kcal";
      goalValueEl.textContent = suggestedRounded + " kcal";

      // Display macros
      proteinValueEl.textContent =
        Math.round(proteinMin) + "‚Äì" + Math.round(proteinMax) + " g/day";
      fatValueEl.textContent =
        Math.round(fatMin) + "‚Äì" + Math.round(fatMax) + " g/day";
      carbValueEl.textContent = "‚âà " + Math.round(carbsGrams) + " g/day";

      // Daily plan split (30% / 40% / 25% / 5%)
      const breakfastCals = suggestedCalories * 0.3;
      const lunchCals = suggestedCalories * 0.4;
      const dinnerCals = suggestedCalories * 0.25;
      const snacksCals = suggestedCalories * 0.05;

      breakfastValueEl.textContent = Math.round(breakfastCals) + " kcal";
      lunchValueEl.textContent = Math.round(lunchCals) + " kcal";
      dinnerValueEl.textContent = Math.round(dinnerCals) + " kcal";
      snacksValueEl.textContent = Math.round(snacksCals) + " kcal";

      goalDescriptionEl.textContent = description;

      // Show result card with animation
      resultBox.classList.add("visible");

      // Scroll into view for better UX (especially on mobile)
      resultBox.scrollIntoView({ behavior: "smooth", block: "nearest" });
    });

    // ŸÜÿ≠ŸÖŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨ ÿπŸÜÿØ ŸÅÿ™ÿ≠ ÿßŸÑÿµŸÅÿ≠ÿ©
    loadFormState();
  </script>
</body>
</html>


